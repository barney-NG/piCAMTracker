# piCAMTracker
This is another Raspberry Pi motion tracker based on Python, picamera and opencv.   
It makes heavily use of the motion blocks generated by GPU of the Raspberry Pi.   
**Target** A crossing event is detected on a GPIO port and a picture of the event is transmitted via nginx to a smart phone for example.

# Prerequisites
* picamera (1.13)
* opencv (3.4.1)
* pygame (1.9.3)
* libh264decoder   (currently included)  

Note: This information is for people who want to start from scratch. If you start from one of the provided images you don't need to care -- everything is included and the tracker starts automatically at system start.
 
# Status
Currently this is an alpha release.   
* The object detection is working quiet well in different light conditions. 
* The first outdoor tests went very well but there are limits: 
  * The camera cannot distinguish between birds/bees and planes. All moving things are evaluated.
  * moving objects in the turn area can lead to false positives. (grass, bushes, flags, etc)
  * The fisheye setup with the V1 camera seems to be the best setup for our purposes. (F3F model air racing)
  * If you want to follow up more far away objects (F3B speed for example) the newer V2 camera is the better choice.
  * To improve nearby crossing detection the camera should be mounted straight. (Not in 90 degrees as used before)
    * Crossing is now in X direction (viewAngle: 0, xCross: 40, yCross: -1)  
* V1 camera from Waveshare with fisheye lens (module G); 1280x960 pixels, 42 f/s; full FOV; 192MB GPU memory
  * Mode 5 (1280x720p @ 49 f/s) does not center the frames horizontally
* V2 camera with standard lens; 1632x896, 40 f/s; full FOV; 192MB GPU memory.
  * 1280x720p @ 62 f/s (FOV is very small)
  * In general the V2 camera needs more light than the V1 with the fisheye
* In stormy conditions you need to fix the camera very well. Otherwise a lot of wrong positives are genenrated.
* The new Raspberry Pi 3 Model B Plus is working. (Speed is not improved)
* The web interface supports the most rudimentary stuff to control the camera.
* no video saving so far.   
* we have a printed cover available. (see wiki section)
* you can download the V0.3 image [here](https://drive.google.com/file/d/1fq3jb0tYNVIxhNmgaASyJYLsajSUOv0g/view?usp=sharing)
* you can download the V0.4 image [here](https://drive.google.com/file/d/1JSD_bzF0yAWboponnqq7Q_OJO1nm057K/view?usp=sharing)
  pi-password: Olav01
* The v0.3 image runs the B and the B Plus
* The v0.4 image is created on a B Plus.

# FAQ
see [FAQ](https://github.com/barney-NG/piCAMTracker/wiki/FAQ) section

# Documentation
see [wiki](https://github.com/barney-NG/piCAMTracker/wiki) section

# TODO
* More testing in real conditions is needed.
* create a full automatic setup with embedded Wifi access point. (just power on the device)
* Make libh264decoder Python 3 able and update the source repository
* if possible avoid to decode h264  (started)
